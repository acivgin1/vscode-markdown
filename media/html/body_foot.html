<script>
    function openDetails(targetDIV) {
        const parentDetails = targetDIV.parentElement.closest("details");
        if (parentDetails !== null) {
            parentDetails.open = true;
            openDetails(parentDetails);
        }
    }

    const openDetailsIfAnchorHidden = evt => {
        const targetDIV = document.querySelector(evt.target.getAttribute("href"));
        if (!!targetDIV.offsetHeight || targetDIV.getClientRects().length) return;
        openDetails(targetDIV)
    }

    [...document.querySelectorAll("[href^='#']")].forEach(
        el => el.addEventListener("click", openDetailsIfAnchorHidden)
    );
</script>
